<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign Up</title>
  <link rel="stylesheet" href="style.css">
  <header>
    <h1><a href="index.html">BooksR'Us</a></h1>
  </header>
  <nav>
    <ul>
      <li>
        <a href="index.html" class = "button">Home</a>
      </li>
      <li>
        <a href="signup.html" class = "button">Sign up</a>
      </li>    
      <li>
        <a href="login.html" class = "button">login</a>
      </li>
    </ul>
  </nav>
<div class="row">
  <form id="myForm" class="col s12" >
    <div class="row">
      <h2 class="form-heading">Sign Up for BooksR'Us </h2>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <input name="username" type="text" minlength="8" required>
        <label for="username">Username</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <input name="password" type="password"  required pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$">
        <label for="password">Password</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <input name="email" type="email" required>
        <label for="email">Email</label>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <input type="submit" class="btn waves-effect waves-light blue" value="Sign Up" required/>
      </div>
    </div>

  </form>

<script>

  function submit(event){
   event.preventDefault();



   const myForm = event.target;
   const formData = new FormData(myForm);
   const data = Object.fromEntries(formData);

   postData('', data);
  }


  document.forms['myForm'].addEventListener('submit', submit);


  async function postData(url, data){
    try{

       let response = await fetch(
         url, 
         {
              method: 'POST',
              body: JSON.stringify(data),
            headers: { 'Content-Type':'application/json' }
         },
       );

       let result = await response.text();
       console.log(result);

     }catch(error){
       console.log(error);
     }
  }
</script>

